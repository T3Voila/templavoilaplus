{namespace core=TYPO3\CMS\Core\ViewHelpers}

<div class="callout">
    <h2 class="text-primary">Update configuration to TemplaVoilà! Plus 8</h2>
    <h2>Step 1</h2>

    <f:if condition="!{allOldDatabaseElementsFound}">
        <f:be.infobox title="Error" state="2">
            <p class="lead">It seams you have deleted database tables and/or fields which are necessary for the Update Script.<br>Process stopped.</p>
        </f:be.infobox>
    </f:if>

    <f:if condition="!{allNewDatabaseElementsFound}">
        <f:be.infobox title="Error" state="2">
            <p class="lead">The new fields on table pages and tt_content do not exists, please run the "Analyze Database Structure" tool and add that fields (but do not remove any tables or fields) and come back afterwards.<br>Process stopped.</p>
        </f:be.infobox>
    </f:if>
    <f:if condition="!{storagePidsAreFine}">
        <f:be.infobox title="Error" state="2">
            <p class="lead">You have some Template Objects inside Workspaces, as this is unusal and hart to determine what you have done, you need to check for yourself what needs to be done, to get this cleaned up. (This may be old data, left behind by an older and broken TemplaVoilà! or TYPO3 version and can be removed fromn database.)<br>Process stopped.</p>
        </f:be.infobox>
    </f:if>

    <f:if condition="{allChecksAreFine}">
        <p class="lead">.</p>

        <form action="#" method="POST">
            <input type="hidden" name="update" value="TemplaVoilaPlus8" />
            <f:be.infobox title="" state="-1" disableIcon="true">
                <button class="btn btn-primary btn-block btn-lg" type="submit" name="step" value="2">
                    <core:icon identifier="extensions-scheduler-run-task" /> Continue Update configuration to TemplaVoilà! Plus 8
                </button>
            </f:be.infobox>
        </form>
    </f:if>
</div>
