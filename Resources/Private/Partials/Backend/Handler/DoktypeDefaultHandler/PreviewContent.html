<f:variable name="previewTyped" value="Default" />
<f:variable name="previewTable" value="{node.raw.table -> f:format.case(mode:'capital')}" />

<f:if condition="{settings.configuration.TCA.{node.raw.table}.ctrl.typeicon_column}">
    <f:variable name="typeColumn" value="{settings.configuration.TCA.{node.raw.table}.ctrl.typeicon_column}"/>
    <f:variable name="previewTyped" value="{node.raw.entity.{typeColumn} -> f:format.case(mode:'capital')}"/>
</f:if>

<f:if condition="{node.rendering.preview}">
    <f:then>
        <div class="core-preview">
            <f:format.raw>{node.rendering.preview}</f:format.raw>
        </div>
    </f:then>
    <f:else>
        <div class="tvp-preview">
            <f:render partial="Backend/Preview/{previewTable}/{previewTyped}" optional="1" arguments="{node: node}">
                <f:render partial="Backend/Preview/{previewTable}" optional="1" arguments="{node: node}">
                    <f:render partial="Backend/Preview/Default" arguments="{node: node}" />
                </f:render>
            </f:render>
        </div>
    </f:else>
</f:if>
